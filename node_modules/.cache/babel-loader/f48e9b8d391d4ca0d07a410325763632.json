{"ast":null,"code":"import _toConsumableArray from\"D:/MernStactEcommerce/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/MernStactEcommerce/ecommerce/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Col,Pagination,Row}from'react-bootstrap';import Product from'../components/Product';import{useDispatch,useSelector}from\"react-redux\";import{listProducts}from\"../actions/productActions\";import Loader from'../components/Loader';import Message from'../components/Message';import Paginate from'../components/Paginate';import Meta from'../components/Meta';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Homescreen=function Homescreen(props){var keyword=props.match.params.keyword;var pageNumber=props.match.params.pageNumber||1;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,page=productList.page,pages=productList.pages;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),searchProducts=_useState4[0],setSearchProducts=_useState4[1];useEffect(function(){dispatch(listProducts());},[dispatch,keyword]);useEffect(function(){if(products&&products.length>0&&keyword){var word=keyword.split(\" \");//let dataList = []\nsetData([]);word.map(function(name){products.map(function(ele){var i2data=ele.name.toLowerCase().split(\" \").includes(name.toLowerCase());if(i2data){setData(function(prev){return[].concat(_toConsumableArray(prev),[ele]);});}});products.map(function(ele){if(ele.subcategory.toLowerCase()===name.toLowerCase()){setData(function(prev){return[].concat(_toConsumableArray(prev),[ele]);});}});products.map(function(ele){if(ele.brand.toLowerCase()===name.toLowerCase()){setData(function(prev){return[].concat(_toConsumableArray(prev),[ele]);});}});});}},[products,keyword]);useEffect(function(){if(data&&data.length>0){setSearchProducts(_toConsumableArray(new Set(data)));}},[data]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Meta,{}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Search results (\",searchProducts&&searchProducts.length>0?searchProducts.length:0,\")\"]}),/*#__PURE__*/_jsx(\"hr\",{}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Row,{children:searchProducts&&searchProducts.length>0?searchProducts.map(function(ele,i){return/*#__PURE__*/_jsx(Col,{xs:12,sm:12,md:6,lg:6,xl:6,children:/*#__PURE__*/_jsx(Product,{product:ele})},ele._id);}):/*#__PURE__*/_jsx(\"h3\",{children:\"Not found any products\"})})})]});};export default Homescreen;","map":{"version":3,"sources":["D:/MernStactEcommerce/ecommerce/src/screens/Homescreen.js"],"names":["React","useState","useEffect","Col","Pagination","Row","Product","useDispatch","useSelector","listProducts","Loader","Message","Paginate","Meta","Homescreen","props","keyword","match","params","pageNumber","dispatch","productList","state","loading","error","products","page","pages","data","setData","searchProducts","setSearchProducts","length","word","split","map","name","ele","i2data","toLowerCase","includes","prev","subcategory","brand","Set","i","_id"],"mappings":"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","sourcesContent":["import React, { useState,useEffect}from 'react'\r\nimport { Col, Pagination, Row } from 'react-bootstrap';\r\nimport Product from '../components/Product';\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { listProducts } from \"../actions/productActions\"\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport Paginate from '../components/Paginate';\r\nimport Meta from '../components/Meta';\r\n\r\n\r\nconst Homescreen = (props) => {\r\n    const keyword = props.match.params.keyword;\r\n    const pageNumber = props.match.params.pageNumber || 1\r\n    const dispatch = useDispatch();\r\n    const productList = useSelector(state => state.productList)\r\n    const { loading, error, products, page, pages } = productList;\r\n    const [data, setData] = useState([])\r\n    const [searchProducts,setSearchProducts]=useState([])\r\n    useEffect(() => {\r\n        dispatch(listProducts())\r\n    }, [dispatch, keyword])\r\n    useEffect(() => {\r\n       \r\n       \r\n        if (products && products.length > 0 && keyword) {\r\n            const word = keyword.split(\" \");\r\n            //let dataList = []\r\n            setData([])\r\n            word.map(name => {\r\n                 products.map(ele => {\r\n                  \r\n                    let i2data = ele.name.toLowerCase().split(\" \").includes(name.toLowerCase())\r\n\r\n                    if (i2data)\r\n                    {\r\n                        \r\n                        setData(prev => [...prev,ele])\r\n                        \r\n                     }\r\n                     \r\n                }\r\n                )\r\n                products.map(ele => {\r\n                    if (ele.subcategory.toLowerCase() === name.toLowerCase())\r\n                    {\r\n                     setData(prev => [...prev,ele])\r\n                    }\r\n                })\r\n                products.map(ele => {\r\n                    if (ele.brand.toLowerCase() === name.toLowerCase())\r\n                    {\r\n                        setData(prev => [...prev,ele])\r\n                    }\r\n                 })\r\n               \r\n            })\r\n            \r\n            \r\n        }\r\n    }, [products, keyword])\r\n    useEffect(() => {\r\n        if (data && data.length > 0)\r\n        {\r\n           setSearchProducts([...new Set(data)])\r\n           \r\n        }\r\n    },[data])\r\n    \r\n                \r\n    return (\r\n        <>\r\n            <Meta />\r\n            \r\n            <h1>Search results ({ searchProducts && searchProducts.length>0?searchProducts.length:0 })</h1>\r\n            <hr />\r\n            {\r\n                loading ? <Loader /> : error ? <Message variant='danger'>{error}</Message> :<>\r\n                    <Row>\r\n                {\r\n                   searchProducts && searchProducts.length>0 ? searchProducts.map((ele, i) => (\r\n                        <Col key={ele._id} xs={12} sm={12} md={6} lg={6} xl={6}>\r\n                            <Product product={ele}/>\r\n                        </Col>\r\n                    )):<h3>Not found any products</h3>\r\n                }\r\n               \r\n                    </Row>\r\n                    {/* <Paginate pages={pages} page={page} keyword={keyword ? keyword:\"\"} /> */}\r\n                    </>\r\n            }\r\n           \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Homescreen\r\n"]},"metadata":{},"sourceType":"module"}